{deps, [
        {jsone,   ".*", {git, "https://github.com/sile/jsone", []}},
        {gen_rpc, {git, "https://github.com/xio/gen_rpc", []}},
        {gproc, {git, "https://github.com/voxoz/gproc", []}},
        {ekka, {git, "https://github.com/xio/ekka", "emqx30"}},
        {esockd, {git, "https://github.com/xio/esockd", []}},
        {replayq, ".*", {git, "https://github.com/xio/replayq", []}},
        {cowboy,  ".*", {git, "https://github.com/ninenines/cowboy", "2.5.0"}},
        {minirest,".*", {git,"https://github.com/xio/minirest", "emqx42"}}
       ]}.

{edoc_opts, [{preprocess, true}]}.
{erl_opts, [warn_unused_vars,
            warn_shadow_vars,
            warn_unused_import,
            warn_obsolete_guard,
            debug_info,
            {parse_transform},
            {d, 'APPLICATION', emqx},
            compressed %% for edge
           ]}.

{xref_checks, [undefined_function_calls, undefined_functions,
               locals_not_used, deprecated_function_calls,
               warnings_as_errors, deprecated_functions
              ]}.

{erl_first_files, ["src/emqx_logger.erl"]}.
{eunit_tests, [{dir, "test"}]}.
{cover_enabled, true}.
{cover_opts, [verbose]}.
{cover_export_enabled, true}.

{plugins, [rebar3_proper]}.
{profiles,[
  {test, [
    {deps, [
      {meck,    ".*", {git, "https://github.com/eproxus/meck", {tag, "0.9.0"}}},
      {proper,  ".*", {git, "https://github.com/proper-testing/proper", {tag, "v1.3"}}}
    ]}
  ]}
]}.
